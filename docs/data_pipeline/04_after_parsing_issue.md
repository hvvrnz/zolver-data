### Issue: LLM Parsing 이후 문자열 변형 이슈 정리

텍스트를 parsing 후 LLM에 입력하여 학과/단과대학/학점 정보를 JSON으로 구조화하는 과정에서 출력 결과에 **의도하지 않은 문자열 변형 문제**가 지속적으로 발생함.
  본 이슈는 LLM 출력 오류가 아닌, 개행 문자(\n)를 공백(' ')으로 치환하는 전처리 로직의 한계로 인해 발생한 문제로 판단됨.

#### 현재 상황:
- 전공선택 학점은 정상 출력
  → 단, 포맷 안정성에 대해서는 추후 검증 필요
- Parsing 단계에서 개행 문자를 공백(' ')으로 치환 후 LLM 입력
- 단과대학명 구조화 관련 프롬프트 제거
- JSON 출력 제약은 유지
- LLM 응답은 JSON만 출력 (부연 설명 없음)
  → JSON 구조 자체는 안정화 단계
---
#### 문제 상황
1. 단과대학명 표기 분리 문제
- 원본 텍스트 예시
```
디자인\n대학
```
- 전처리 이후 LLM 입력
```
디자인 대학
```
- 출력 결과
```
"college_name": "디자인 대학"
```
→ 기대값은 "디자인대학"

개행이 공백으로 치환되면서 고유명사 내부에 불필요한 공백이 삽입됨


2. 학과명 한문 출력 문제
- 기대 출력은 "경찰학과"
- 출력 언어(한글 고정)에 대한 제약 부재로 인해 언어 일관성이 보장되지 않음

---
#### 예시 입력:
```
def text_to_json_with_llm_ver2(raw_text):
    prompt = f"""
당신은 데이터 구조화 전문가입니다.
아래 텍스트를 JSON으로 변환하세요.

형식 예시는 다음과 같습니다:
{JSON_SCHEMA_EXAMPLE}

텍스트:
{raw_text}

부연 설명 없이 JSON만 출력하십시오.
```

#### 예시 출력 문제:
```
          "college_name": "디자인 대학",
      "departments": [
        {
          "department_name": "산업디자인학과",
          "credits": {
            "general_education": 35,
            "major_required": 14,
            "major_elective": 58,
            "major_total": 72,
            "double_major": 40,
            "graduation_total": 132
          }
        },
```
→ 디자인대학이 아닌 디자인 대학
```
 "department_name": "警察학과",
          "credits": {
            "general_education": 35,
            "major_required": 12,
            "major_elective": 54,
            "major_total": 66,
            "double_major": 40,
            "graduation_total": 124
          }
```
→ department_name 한문 출력

#### 원인: 
1. 단과대학명 공백 문제
- LLM이 한국어 고유명사를 의미 단위(명사+명사) 로 재구성
- "디자인대학" → "디자인 대학"으로 자연어 보정
- 구조화 프롬프트에서 명칭 고정 규칙이 없음


- #### 개행을 제거('')하지 못하는 이유: 

학점 정보 등 숫자 데이터가 개행으로 구분되어 있는 경우 존재
```
35\n23\n34
```
\n → '' 적용 시
```
352334
```
→ 숫자 의미가 훼손됨
→ 따라서 개행을 단순 제거하는 방식은 사용 불가

2. 한문 출력 문제
- LLM 내부 토큰/임베딩에서 "경찰" ↔ "警察" 개념이 동일하게 매핑
- 출력 언어(한글)에 대한 명시적 제약 부재
- 해당 파이프라인에 문자셋 검증 로직 없음

---

#### 해결 방향 
- Preprocessing 단계 보완

1. 단과대학명/학과명에 대해 공백 제거 규칙 적용
2. 한글 외 문자(한문 등) 필터링 또는 치환
```
"디자인 대학" → "디자인대학"
"警察학과" → "경찰학과"
```
- 추후 Post-processing 보완
 1. JSON 파싱 이후 정규식 기반 한글 검증


#### 정리
JSON 구조화 자체는 안정화 단계
Pre/Post-processing 중심으로 해결 가능성 높다고 보여짐.
